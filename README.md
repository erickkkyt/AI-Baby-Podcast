# AI Baby Generator: ä¸ªæ€§åŒ–AIå®å®æ’­å®¢è§†é¢‘ç”Ÿæˆå¹³å°

AI Baby Generator æ˜¯ä¸€ä¸ªåŸºäº Next.js çš„å…¨æ ˆWebåº”ç”¨ï¼Œå…è®¸ç”¨æˆ·é€šè¿‡AIæŠ€æœ¯ç”Ÿæˆä¸ªæ€§åŒ–çš„å®å®æ’­å®¢è§†é¢‘ã€‚ç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰å®å®çš„ç§æ—ã€å‘å‹å’Œæ’­å®¢ä¸»é¢˜ç­‰å‚æ•°ï¼Œç³»ç»Ÿå°†é€šè¿‡n8nå·¥ä½œæµè‡ªåŠ¨ç”Ÿæˆé«˜è´¨é‡çš„AIè§†é¢‘å†…å®¹ã€‚

## âœ¨ æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§

### ğŸ¬ AIè§†é¢‘ç”Ÿæˆå¼•æ“
- **ä¸ªæ€§åŒ–å®šåˆ¶**: æ”¯æŒè‡ªå®šä¹‰å®å®ç§æ—ï¼ˆäºšæ´²ã€ä¸­ä¸œã€éè£”ç¾å›½ã€ç™½ç§äººç­‰ï¼‰å’Œå‘å‹æ ·å¼ï¼ˆå·å‘ã€é©¬å°¾ã€å¹³å¤´ã€æ³¢æ³¢å¤´ç­‰ï¼‰
- **å››é‡AIé©±åŠ¨**: GPT-4æ–‡å­—åˆ›ä½œ + Murf.aiè¯­éŸ³åˆæˆ + Flux.1-Proå›¾åƒç”Ÿæˆ + Hedraè§†é¢‘åˆ¶ä½œ
- **æ™ºèƒ½ä¸»é¢˜è§£æ**: ç”¨æˆ·è¾“å…¥ä»»æ„æ’­å®¢ä¸»é¢˜ï¼ŒAIå°†è‡ªåŠ¨ç”Ÿæˆç›¸åº”çš„æ–‡å­—ç¨¿ã€é…éŸ³å’Œè§†è§‰å†…å®¹
- **å¹¶è¡Œå¤„ç†æ¶æ„**: éŸ³é¢‘å’Œå›¾ç‰‡åŒæ—¶ç”Ÿæˆï¼Œæ•´ä½“å¤„ç†æ—¶é—´ä»…éœ€2-3åˆ†é’Ÿ
- **é«˜è´¨é‡è¾“å‡º**: ç”Ÿæˆçš„è§†é¢‘æ”¯æŒåœ¨çº¿æ’­æ”¾å’Œä¸‹è½½ï¼Œæ ¼å¼ä¸ºMP4

### ğŸ’³ ç§¯åˆ†ä¸è®¡è´¹ç³»ç»Ÿ
- **æ™ºèƒ½è®¡è´¹**: åŸºäºè§†é¢‘æ—¶é•¿çš„æŒ‰ç§’è®¡è´¹æ¨¡å¼ï¼Œå…¬å¼ä¸º `Math.ceil(duration_ms / 1000)`
- **ç§¯åˆ†ç®¡ç†**: æ–°ç”¨æˆ·æ³¨å†Œè‡ªåŠ¨è·å¾—20ç§¯åˆ†ï¼Œæ”¯æŒç§¯åˆ†ä½™é¢æŸ¥è¯¢
- **é˜²é‡å¤æ‰£è´¹**: å®ç°äº†webhookå¹‚ç­‰æ€§æ£€æŸ¥ï¼Œé˜²æ­¢å¤šæ¬¡å›è°ƒå¯¼è‡´çš„é‡å¤æ‰£è´¹
- **ä½™é¢ä¸è¶³ä¿æŠ¤**: ç§¯åˆ†ä¸è¶³æ—¶è‡ªåŠ¨æ‹¦æˆªè¯·æ±‚å¹¶æç¤ºç”¨æˆ·

### ğŸ” ç”¨æˆ·è®¤è¯ä¸æƒé™
- **Supabase Auth**: é›†æˆSupabaseè®¤è¯ç³»ç»Ÿï¼Œæ”¯æŒé‚®ç®±æ³¨å†Œ/ç™»å½•
- **ä¼šè¯ç®¡ç†**: è‡ªåŠ¨å¤„ç†ç”¨æˆ·ä¼šè¯çŠ¶æ€å’Œæƒé™éªŒè¯
- **RLSå®‰å…¨**: å®ç°è¡Œçº§å®‰å…¨ç­–ç•¥ï¼Œç¡®ä¿æ•°æ®è®¿é—®å®‰å…¨

### ğŸ“Š é¡¹ç›®ç®¡ç†Dashboard
- **å®æ—¶çŠ¶æ€**: æ”¯æŒprocessingã€completedã€failedç­‰çŠ¶æ€å®æ—¶æ›´æ–°
- **é¡¹ç›®å†å²**: ç”¨æˆ·å¯æŸ¥çœ‹æ‰€æœ‰å†å²é¡¹ç›®å’Œç”Ÿæˆè®°å½•
- **è§†é¢‘é¢„è§ˆ**: å†…ç½®è§†é¢‘æ’­æ”¾å™¨ï¼Œæ”¯æŒåœ¨çº¿é¢„è§ˆç”Ÿæˆçš„è§†é¢‘
- **æ‰¹é‡ç®¡ç†**: å“åº”å¼ç½‘æ ¼å¸ƒå±€ï¼Œæ”¯æŒå¤šé¡¹ç›®åŒæ—¶ç®¡ç†

### ğŸ”— n8nå·¥ä½œæµé›†æˆ
- **å¼‚æ­¥å¤„ç†**: æäº¤åç«‹å³è¿”å›ï¼Œåå°å¼‚æ­¥å¤„ç†è§†é¢‘ç”Ÿæˆ
- **å››é‡AIå¼•æ“**: é›†æˆGPT-4æ–‡å­—ç”Ÿæˆã€MurféŸ³é¢‘åˆæˆã€Flux.1-Proå›¾ç‰‡ç”Ÿæˆã€Hedraè§†é¢‘åˆ¶ä½œ
- **å¹¶è¡Œå¤„ç†**: éŸ³é¢‘å’Œå›¾ç‰‡ç”ŸæˆåŒæ—¶è¿›è¡Œï¼Œæå‡å¤„ç†æ•ˆç‡
- **Webhookå›è°ƒ**: n8nå®Œæˆåè‡ªåŠ¨å›è°ƒæ›´æ–°é¡¹ç›®çŠ¶æ€
- **é”™è¯¯å¤„ç†**: å®Œå–„çš„é”™è¯¯å¤„ç†å’ŒçŠ¶æ€ç®¡ç†æœºåˆ¶
- **å®‰å…¨éªŒè¯**: ä½¿ç”¨APIå¯†é’¥éªŒè¯n8nå›è°ƒçš„åˆæ³•æ€§

## ğŸ› ï¸ æŠ€æœ¯æ¶æ„æ ˆ

### å‰ç«¯æŠ€æœ¯
- **æ¡†æ¶**: Next.js 15.3.1 (App Router)
- **UIåº“**: React 19.0.0 + TypeScript 5+
- **æ ·å¼**: Tailwind CSS 4 + è‡ªå®šä¹‰ç»„ä»¶
- **å›¾æ ‡**: Lucide React 0.511.0
- **çŠ¶æ€ç®¡ç†**: React Hooks + Zustand (è§„åˆ’ä¸­)
- **æ—¥æœŸå¤„ç†**: date-fns 4.1.0

### åç«¯æ¶æ„
- **è¿è¡Œæ—¶**: Next.js API Routes
- **æ•°æ®åº“**: Supabase (PostgreSQL)
- **è®¤è¯**: Supabase Auth (@supabase/ssr 0.6.1)
- **æ–‡ä»¶å­˜å‚¨**: Cloudflare R2 (é€šè¿‡å¤–éƒ¨è§†é¢‘URL)
- **å·¥ä½œæµ**: n8n.io è‡ªåŠ¨åŒ–å¹³å°

### å¼€å‘å·¥å…·
- **ç±»å‹æ£€æŸ¥**: TypeScript + @types/*
- **ä»£ç è§„èŒƒ**: ESLint 9 + eslint-config-next
- **æ„å»ºå·¥å…·**: Next.js Turbopack
- **éƒ¨ç½²**: Vercel

### ç¬¬ä¸‰æ–¹é›†æˆ
- **æ–‡å­—ç”Ÿæˆ**: OpenAI GPT-4 API
- **éŸ³é¢‘åˆæˆ**: Murf.ai Text-to-Speech API
- **å›¾ç‰‡ç”Ÿæˆ**: Flux.1-Pro Image Generation API
- **è§†é¢‘åˆ¶ä½œ**: Hedra.com AI Video API
- **å·¥ä½œæµ**: n8n.io è‡ªåŠ¨åŒ–ç¼–æ’
- **æ”¯ä»˜ç½‘å…³**: Creem Payment Gateway
- **HTTPå®¢æˆ·ç«¯**: Axios 1.9.0
- **UUIDç”Ÿæˆ**: uuid 11.1.0
- **åˆ†æå·¥å…·**: Google Analytics + Microsoft Clarity

## ğŸ“‚ é¡¹ç›®æ¶æ„å›¾

```
AI-Baby-Podcast/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                    # Next.js App Router (ä¸»åº”ç”¨é€»è¾‘)
â”‚   â”‚   â”œâ”€â”€ api/                # APIç«¯ç‚¹
â”‚   â”‚   â”‚   â”œâ”€â”€ auth/           # è®¤è¯ç›¸å…³API
â”‚   â”‚   â”‚   â”œâ”€â”€ submit-podcast-idea/ # é¡¹ç›®æäº¤API
â”‚   â”‚   â”‚   â””â”€â”€ webhook/        # n8nå›è°ƒæ¥æ”¶
â”‚   â”‚   â”‚       â””â”€â”€ n8n-video-ready/
â”‚   â”‚   â”œâ”€â”€ dashboard/          # ç”¨æˆ·æ§åˆ¶å°
â”‚   â”‚   â”‚   â”œâ”€â”€ projects/       # é¡¹ç›®ç®¡ç†é¡µé¢
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx        # ä¸»æ§åˆ¶å°
â”‚   â”‚   â”œâ”€â”€ login/              # ç™»å½•æ³¨å†Œé¡µé¢
â”‚   â”‚   â”œâ”€â”€ pricing/            # å®šä»·é¡µé¢
â”‚   â”‚   â”œâ”€â”€ privacy-policy/     # éšç§æ”¿ç­–
â”‚   â”‚   â”œâ”€â”€ terms-of-service/   # æœåŠ¡æ¡æ¬¾
â”‚   â”‚   â”œâ”€â”€ layout.tsx          # æ ¹å¸ƒå±€
â”‚   â”‚   â””â”€â”€ page.tsx            # é¦–é¡µ
â”‚   â”œâ”€â”€ components/             # Reactç»„ä»¶åº“
â”‚   â”‚   â”œâ”€â”€ auth/               # è®¤è¯ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ modals/             # å¼¹çª—ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ ConfirmationModal.tsx
â”‚   â”‚   â”‚   â””â”€â”€ InsufficientCreditsModal.tsx
â”‚   â”‚   â”œâ”€â”€ DashboardClient.tsx # æ§åˆ¶å°ä¸»ç•Œé¢
â”‚   â”‚   â”œâ”€â”€ DashboardSiderbar.tsx # ä¾§è¾¹æ å¯¼èˆª
â”‚   â”‚   â””â”€â”€ ProjectsClient.tsx  # é¡¹ç›®åˆ—è¡¨ç»„ä»¶
â”‚   â”œâ”€â”€ hooks/                  # è‡ªå®šä¹‰React Hooks
â”‚   â”œâ”€â”€ lib/                    # å·¥å…·åº“å’Œé…ç½®
â”‚   â”œâ”€â”€ types/                  # TypeScriptç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ project.ts          # é¡¹ç›®æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ utils/                  # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ supabase/           # Supabaseå®¢æˆ·ç«¯é…ç½®
â”‚   â”‚       â”œâ”€â”€ client.ts       # å®¢æˆ·ç«¯é…ç½®
â”‚   â”‚       â”œâ”€â”€ server.ts       # æœåŠ¡ç«¯é…ç½®
â”‚   â”‚       â””â”€â”€ middleware.ts   # ä¸­é—´ä»¶é…ç½®
â”‚   â””â”€â”€ middleware.ts           # Next.jsä¸­é—´ä»¶
â”œâ”€â”€ public/                     # é™æ€èµ„æº
â”œâ”€â”€ .env.local                  # ç¯å¢ƒå˜é‡é…ç½®
â”œâ”€â”€ next.config.mjs             # Next.jsé…ç½®
â”œâ”€â”€ package.json                # é¡¹ç›®ä¾èµ–
â”œâ”€â”€ tsconfig.json               # TypeScripté…ç½®
â”œâ”€â”€ tailwind.config.js          # Tailwind CSSé…ç½®
â””â”€â”€ æ•°æ®åº“.md                   # æ•°æ®åº“è®¾è®¡æ–‡æ¡£
```

## ğŸ”„ ä¸šåŠ¡æµç¨‹æ¶æ„

### 1. ç”¨æˆ·æäº¤æµç¨‹
```mermaid
graph TD
    A[ç”¨æˆ·å¡«å†™è¡¨å•] --> B[å‰ç«¯éªŒè¯ç§¯åˆ†]
    B --> C{ç§¯åˆ†å……è¶³?}
    C -->|å¦| D[æ˜¾ç¤ºç§¯åˆ†ä¸è¶³å¼¹çª—]
    C -->|æ˜¯| E[è°ƒç”¨/api/submit-podcast-idea]
    E --> F[ç”Ÿæˆå”¯ä¸€jobId]
    F --> G[è°ƒç”¨Supabase RPCåˆ›å»ºé¡¹ç›®]
    G --> H[è§¦å‘n8nå·¥ä½œæµ]
    H --> I[è¿”å›processingçŠ¶æ€]
```

### 2. n8nå·¥ä½œæµå¤„ç†æµç¨‹
```mermaid
graph TD
    A[n8næ¥æ”¶å‚æ•°] --> B[GPT-4ç”Ÿæˆæ–‡å­—ç¨¿]
    B --> C[MurféŸ³é¢‘åˆæˆ]
    B --> D[Flux.1-Proå›¾ç‰‡ç”Ÿæˆ]
    C --> E[éŸ³é¢‘æ ¼å¼è½¬åŒ–]
    D --> F[å›¾ç‰‡æ ¼å¼è½¬åŒ–]
    E --> G[ä¸Šä¼ éŸ³é¢‘è‡³Hedra]
    F --> H[åˆå¹¶å›¾ç‰‡æ•°æ®]
    G --> I[éŸ³é¢‘æ•°æ®æ¸…æ´—]
    H --> J[ä¸Šä¼ Hedraå›¾ç‰‡+éŸ³é¢‘]
    I --> K[Mergeåˆå¹¶èŠ‚ç‚¹]
    J --> K
    K --> L[ç”Ÿæˆæœ€ç»ˆè§†é¢‘]
    L --> M[å›è°ƒ/api/webhook/n8n-video-ready]
    M --> N[éªŒè¯APIå¯†é’¥]
    N --> O[å¹‚ç­‰æ€§æ£€æŸ¥]
    O --> P[æ›´æ–°é¡¹ç›®çŠ¶æ€]
    P --> Q[æ‰£é™¤ç”¨æˆ·ç§¯åˆ†]
    Q --> R[å­˜å‚¨è§†é¢‘URL]
```

### 3. æ•°æ®åº“è®¾è®¡

#### æ ¸å¿ƒè¡¨ç»“æ„
```sql
-- ç”¨æˆ·é…ç½®è¡¨
user_profiles (
  user_id UUID PRIMARY KEY,
  credits INTEGER DEFAULT 20,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
)

-- é¡¹ç›®è¡¨
projects (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES auth.users(id),
  job_id UUID UNIQUE NOT NULL,
  ethnicity TEXT NOT NULL,
  hair TEXT NOT NULL,
  topic TEXT NOT NULL,
  status TEXT DEFAULT 'processing',
  video_url TEXT,
  duration INTEGER, -- è§†é¢‘æ—¶é•¿(æ¯«ç§’)
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
)
```

#### æ ¸å¿ƒRPCå‡½æ•°
- `handle_new_user()`: æ–°ç”¨æˆ·æ³¨å†Œè§¦å‘å™¨ï¼Œè‡ªåŠ¨åˆ†é…20ç§¯åˆ†
- `create_initial_project()`: åˆ›å»ºæ–°é¡¹ç›®å¹¶æ£€æŸ¥ç§¯åˆ†
- `deduct_credits_by_duration()`: åŸºäºè§†é¢‘æ—¶é•¿æ‰£é™¤ç§¯åˆ†

## ğŸš€ å¿«é€Ÿå¯åŠ¨æŒ‡å—

### ç¯å¢ƒè¦æ±‚
- Node.js 18+
- npm/pnpm/yarn
- Supabaseè´¦æˆ·
- n8nå®ä¾‹(äº‘ç«¯æˆ–è‡ªéƒ¨ç½²)

### 1. é¡¹ç›®è®¾ç½®
```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd AI-Baby-Podcast

# å®‰è£…ä¾èµ–
npm install

# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.local.example .env.local
```

### 2. ç¯å¢ƒå˜é‡é…ç½®
```env
# Supabase é…ç½®
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key

# n8n é…ç½®
N8N_WEBHOOK_URL=your_n8n_trigger_webhook_url
N8N_API_KEY=your_shared_secret_key

# Creem æ”¯ä»˜é…ç½®
CREEM_API_URL=https://test-api.creem.io # Creem API åŸºç¡€ URL (æµ‹è¯•ç¯å¢ƒï¼Œç”Ÿäº§ç¯å¢ƒè¯·ä½¿ç”¨ https://api.creem.io)
X_API_KEY=your_creem_api_key # Creem API å¯†é’¥
NEXT_PUBLIC_BASE_URL=http://localhost:3000 # åº”ç”¨çš„åŸºç¡€ URLï¼Œç”¨äºæ„å»ºæ”¯ä»˜å›è°ƒåœ°å€ (ç”Ÿäº§ç¯å¢ƒè¯·æ›¿æ¢ä¸ºå®é™…åŸŸå)

# Analytics (å¯é€‰)
NEXT_PUBLIC_GA_ID=G-GPGTE9VHDR
```

### 3. æ•°æ®åº“åˆå§‹åŒ–
å‚è€ƒ `æ•°æ®åº“.md` æ–‡æ¡£åœ¨Supabaseä¸­åˆ›å»ºï¼š
- è¡¨ç»“æ„ (`user_profiles`, `projects`)
- RPCå‡½æ•° (`handle_new_user`, `create_initial_project`, `deduct_credits_by_duration`)
- RLSå®‰å…¨ç­–ç•¥
- æ•°æ®åº“è§¦å‘å™¨

### ğŸ’³ Creem æ”¯ä»˜é›†æˆé…ç½®

æœ¬é¡¹ç›®é›†æˆäº† Creem ä½œä¸ºæ”¯ä»˜ç½‘å…³ï¼Œç”¨äºå¤„ç†ç”¨æˆ·è´­ä¹°ç§¯åˆ†å¥—é¤å’Œç§¯åˆ†åŒ…çš„æ”¯ä»˜æµç¨‹ã€‚

**æ ¸å¿ƒæµç¨‹ï¼š**
1. ç”¨æˆ·åœ¨å‰ç«¯é€‰æ‹©å¥—é¤/ç§¯åˆ†åŒ…å¹¶å‘èµ·æ”¯ä»˜è¯·æ±‚åˆ° `/api/payment/create-checkout`ã€‚
2. åç«¯APIéªŒè¯ç”¨æˆ·å¹¶è°ƒç”¨ Creem API åˆ›å»ºä¸€ä¸ª checkout sessionã€‚
3. ç”¨æˆ·è¢«é‡å®šå‘åˆ° Creem æä¾›çš„ `checkout_url` è¿›è¡Œæ”¯ä»˜ã€‚
4. æ”¯ä»˜æˆåŠŸåï¼Œç”¨æˆ·è¢«é‡å®šå‘å›åº”ç”¨å†…çš„ `/payment/success` é¡µé¢ã€‚
5. `/payment/success` é¡µé¢å°† Creem å›è°ƒçš„å‚æ•°ï¼ˆé€šè¿‡URLæŸ¥è¯¢å‚æ•°ä¼ é€’ï¼‰POSTåˆ°åç«¯çš„ `/api/payment/process` APIã€‚
6. `/api/payment/process` API è´Ÿè´£ï¼š
    - éªŒè¯ Creem å›è°ƒç­¾åçš„æœ‰æ•ˆæ€§ï¼ˆåŸºäºå›è°ƒURLä¸­å®é™…å­˜åœ¨çš„å‚æ•°å’Œ `X_API_KEY`ï¼‰ã€‚
    - æ£€æŸ¥é‡å¤æ”¯ä»˜ã€‚
    - è°ƒç”¨ Supabase RPC å‡½æ•° (`add_credits`) ä¸ºç”¨æˆ·å¢åŠ ç›¸åº”ç§¯åˆ†ã€‚
    - åœ¨ `payments`, `payment_intents`, `subscriptions` è¡¨ä¸­è®°å½•æ”¯ä»˜å’Œè®¢é˜…ä¿¡æ¯ã€‚

**äº§å“IDé…ç½®ï¼š**

äº§å“IDéœ€è¦åœ¨ä»¥ä¸‹ä¸¤ä¸ªæ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ï¼Œç¡®ä¿ä¸¤å¤„ä¸€è‡´ï¼š
- `src/app/api/payment/create-checkout/route.ts` (åœ¨ `PRODUCT_MAPPING` å¸¸é‡ä¸­)
- `src/app/api/payment/process/route.ts` (åœ¨ `CREDITS_MAPPING` å¸¸é‡ä¸­)

å½“å‰çš„æµ‹è¯•äº§å“IDç¤ºä¾‹ï¼ˆè¯·æ ¹æ®æ‚¨çš„å®é™…æµ‹è¯•IDè°ƒæ•´æˆ–åœ¨ä¸Šçº¿å‰æ›¿æ¢ä¸ºç”Ÿäº§IDï¼‰ï¼š
- **Starter Plan**: `prod_6V2hzzvfpKZHjbMVS4giOx` (200 ç§¯åˆ†) (ä¹‹å‰æµ‹è¯•ç”¨çš„ `prod_6eeURkU2kMXz310aX31lVC`)
- **Small Pack**: `prod_7Jkxt1uHPrQ5J9iUfgkSvh` (50 ç§¯åˆ†) (ä¹‹å‰æµ‹è¯•ç”¨çš„ `prod_7jfpNnI9Ai5sjnKZ1FENBD`)

*æ³¨æ„ï¼šä¸Šçº¿å‰åŠ¡å¿…å°†è¿™äº›æµ‹è¯•IDæ›¿æ¢ä¸ºåœ¨ Creem **ç”Ÿäº§ç¯å¢ƒ**ä¸­åˆ›å»ºçš„å®é™…äº§å“IDã€‚*

**æ•°æ®åº“æ“ä½œæƒé™ï¼š**

ä¸ºäº†ç¡®ä¿å¯¹æ”¯ä»˜ç›¸å…³è¡¨ï¼ˆ`payments`, `payment_intents`, `subscriptions`ï¼‰çš„å†™å…¥æ“ä½œä»¥åŠè°ƒç”¨ `add_credits` RPC å‡½æ•°å…·æœ‰è¶³å¤Ÿçš„æƒé™ï¼ˆç»•è¿‡æˆ–æ»¡è¶³RLSç­–ç•¥ï¼‰ï¼Œåç«¯æ”¯ä»˜API (`create-checkout` å’Œ `process`) ä¸­æ¶‰åŠè¿™äº›æ“ä½œçš„éƒ¨åˆ†ä½¿ç”¨äº†é€šè¿‡ `SUPABASE_SERVICE_ROLE_KEY` åˆå§‹åŒ–çš„ `supabaseAdmin` å®¢æˆ·ç«¯ã€‚

**ç­¾åéªŒè¯ï¼š**

Creem å›è°ƒçš„ç­¾åéªŒè¯é€»è¾‘ä½äº `/api/payment/process/route.ts` çš„ `verifyCreemSignature` å‡½æ•°ä¸­ã€‚è¯¥å‡½æ•°ä¼šä¸¥æ ¼æŒ‰ç…§ Creem åœ¨å›è°ƒ URL ä¸­å®é™…æä¾›çš„å‚æ•°ï¼ˆæŒ‰ `request_id`, `checkout_id`, `order_id`, `customer_id`, `subscription_id` (å¦‚æœå­˜åœ¨), `product_id` çš„é¡ºåºï¼‰ï¼Œæ‹¼æ¥å­—ç¬¦ä¸²å¹¶åŠ ä¸Š `salt=X_API_KEY`ï¼Œç„¶åä½¿ç”¨ SHA256 å“ˆå¸Œä¸ Creem æä¾›çš„ç­¾åè¿›è¡Œæ¯”å¯¹ã€‚

### 4. n8nå·¥ä½œæµé…ç½®

#### å·¥ä½œæµæ¶æ„
- **è§¦å‘å™¨**: WebhookèŠ‚ç‚¹æ¥æ”¶æ¥è‡ª `/api/submit-podcast-idea` çš„POSTè¯·æ±‚
- **è¾“å…¥å‚æ•°**: `jobId`, `ethnicity`, `hair`, `topic`

#### AIæœåŠ¡é›†æˆ
- **GPT-4èŠ‚ç‚¹**: åŸºäºç”¨æˆ·ä¸»é¢˜ç”Ÿæˆæ’­å®¢æ–‡å­—ç¨¿
- **MurféŸ³é¢‘èŠ‚ç‚¹**: å°†æ–‡å­—ç¨¿è½¬æ¢ä¸ºAIè¯­éŸ³
- **Flux.1-Proå›¾ç‰‡èŠ‚ç‚¹**: ç”Ÿæˆç›¸å…³ä¸»é¢˜çš„AIå›¾ç‰‡
- **Hedraè§†é¢‘èŠ‚ç‚¹**: åˆæˆéŸ³é¢‘å’Œå›¾ç‰‡ä¸ºæœ€ç»ˆè§†é¢‘

#### æ•°æ®å¤„ç†æµç¨‹
- **å¹¶è¡Œå¤„ç†**: éŸ³é¢‘å’Œå›¾ç‰‡ç”ŸæˆåŒæ—¶è¿›è¡Œ
- **æ ¼å¼è½¬åŒ–**: ç¡®ä¿éŸ³é¢‘å’Œå›¾ç‰‡æ ¼å¼å…¼å®¹
- **æ•°æ®æ¸…æ´—**: ä¼˜åŒ–éŸ³é¢‘è´¨é‡å’Œå›¾ç‰‡å‚æ•°
- **åˆå¹¶èŠ‚ç‚¹**: æ•´åˆæ‰€æœ‰å¤„ç†ç»“æœ

#### å›è°ƒé…ç½®
- **HTTPè¯·æ±‚èŠ‚ç‚¹**: å‘é€ç»“æœåˆ° `/api/webhook/n8n-video-ready`
- **è®¤è¯**: è¯·æ±‚å¤´ `Authorization: Bearer YOUR_N8N_API_KEY`
- **å›è°ƒæ•°æ®**: `jobId`, `videoUrl`, `duration`, `status`

### 5. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
npm run dev
```
è®¿é—® `http://localhost:3000` å¼€å§‹ä½¿ç”¨

## ğŸ“Š åŠŸèƒ½ç‰¹æ€§è¯¦è§£

### ç§¯åˆ†ç³»ç»Ÿ
- **åˆå§‹ç§¯åˆ†**: æ–°ç”¨æˆ·æ³¨å†Œè‡ªåŠ¨è·å¾—20ç§¯åˆ†
- **æ¶ˆè´¹è§„åˆ™**: æŒ‰è§†é¢‘æ—¶é•¿è®¡è´¹ï¼Œå…¬å¼ `Math.ceil(duration / 1000)` ç§’
- **ä½™é¢ä¿æŠ¤**: ç§¯åˆ†ä¸è¶³æ—¶è‡ªåŠ¨æ‹¦æˆªè¯·æ±‚
- **å†å²è®°å½•**: æ¯ä¸ªé¡¹ç›®æ˜¾ç¤ºå®é™…æ¶ˆè´¹çš„ç§¯åˆ†æ•°é‡

### å®‰å…¨ç‰¹æ€§
- **è®¤è¯ä¸­é—´ä»¶**: Next.jsä¸­é—´ä»¶è‡ªåŠ¨å¤„ç†Supabaseä¼šè¯
- **APIå®‰å…¨**: æ‰€æœ‰APIç«¯ç‚¹éƒ½æœ‰è®¤è¯æ£€æŸ¥
- **Webhookå®‰å…¨**: n8nå›è°ƒä½¿ç”¨å…±äº«å¯†é’¥éªŒè¯
- **å¹‚ç­‰æ€§**: é˜²æ­¢é‡å¤webhookè°ƒç”¨å¯¼è‡´çš„å¤šæ¬¡æ‰£è´¹
- **RLSç­–ç•¥**: æ•°æ®åº“çº§åˆ«çš„è¡Œçº§å®‰å…¨æ§åˆ¶

### ç”¨æˆ·ä½“éªŒ
- **å“åº”å¼è®¾è®¡**: æ”¯æŒæ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡
- **å®æ—¶çŠ¶æ€**: é¡¹ç›®çŠ¶æ€å®æ—¶æ›´æ–°(processing â†’ completed)
- **é”™è¯¯å¤„ç†**: å‹å¥½çš„é”™è¯¯æç¤ºå’Œæ¢å¤æœºåˆ¶
- **åŠ è½½çŠ¶æ€**: å®Œå–„çš„loadingå’Œskeleton screen

### æ€§èƒ½ä¼˜åŒ–
- **æœåŠ¡å™¨ç»„ä»¶**: ä¼˜å…ˆä½¿ç”¨React Server Components
- **åŠ¨æ€å¯¼å…¥**: éå…³é”®ç»„ä»¶ä½¿ç”¨åŠ¨æ€åŠ è½½
- **å›¾ç‰‡ä¼˜åŒ–**: Next.jsè‡ªåŠ¨å›¾ç‰‡ä¼˜åŒ–
- **ç¼“å­˜ç­–ç•¥**: åˆç†çš„APIç¼“å­˜ç­–ç•¥
- **å¹¶è¡Œå¤„ç†**: n8nå·¥ä½œæµä¸­éŸ³é¢‘å’Œå›¾ç‰‡å¹¶è¡Œç”Ÿæˆï¼Œå‡å°‘æ€»å¤„ç†æ—¶é—´

## ğŸ¨ n8nå·¥ä½œæµè¯¦ç»†æ¶æ„

### AIæœåŠ¡æä¾›å•†
| æœåŠ¡ç±»å‹ | APIæä¾›å•† | åŠŸèƒ½æè¿° | å¤„ç†èŠ‚ç‚¹ |
|---------|-----------|----------|---------|
| ğŸ¤– æ–‡å­—ç”Ÿæˆ | OpenAI GPT-4 | åŸºäºä¸»é¢˜ç”Ÿæˆæ’­å®¢æ–‡å­—ç¨¿ | `gpt4ç”Ÿæˆæ–‡å­—ç¨¿` |
| ğŸµ éŸ³é¢‘åˆæˆ | Murf.ai | æ–‡å­—è½¬è¯­éŸ³ï¼Œç”ŸæˆAIæ’­å®¢éŸ³é¢‘ | `è®¿é—®Murfç”ŸæˆéŸ³é¢‘` |
| ğŸ–¼ï¸ å›¾ç‰‡ç”Ÿæˆ | Flux.1-Pro | ç”Ÿæˆä¸»é¢˜ç›¸å…³çš„AIå›¾ç‰‡ | `flux.1-proç”Ÿæˆå›¾ç‰‡` |
| ğŸ¬ è§†é¢‘åˆ¶ä½œ | Hedra.com | åˆæˆéŸ³é¢‘å’Œå›¾ç‰‡ä¸ºæœ€ç»ˆè§†é¢‘ | `ä¸Šä¼ Hedraç³»åˆ—èŠ‚ç‚¹` |

### å·¥ä½œæµæ‰§è¡Œç­–ç•¥
- **å¹¶è¡Œæ¶æ„**: éŸ³é¢‘å’Œå›¾ç‰‡ç”ŸæˆåŒæ—¶è¿›è¡Œï¼Œæå‡50%å¤„ç†æ•ˆç‡
- **æ•°æ®æµç®¡ç†**: è‡ªåŠ¨å¤„ç†æ ¼å¼è½¬æ¢å’Œæ•°æ®æ¸…æ´—
- **é”™è¯¯æ¢å¤**: æ¯ä¸ªAPIè°ƒç”¨éƒ½æœ‰é‡è¯•å’Œé”™è¯¯å¤„ç†æœºåˆ¶
- **è´¨é‡æ§åˆ¶**: éŸ³é¢‘å’Œå›¾ç‰‡éƒ½ç»è¿‡è´¨é‡æ£€æŸ¥å’Œä¼˜åŒ–

### å¤„ç†æ—¶é—´ä¼°ç®—
- æ–‡å­—ç”Ÿæˆ: ~10-20ç§’
- éŸ³é¢‘åˆæˆ: ~30-60ç§’
- å›¾ç‰‡ç”Ÿæˆ: ~20-40ç§’ (å¹¶è¡Œ)
- è§†é¢‘åˆæˆ: ~60-120ç§’
- **æ€»è®¡**: çº¦2-3åˆ†é’Ÿå®Œæˆæ•´ä¸ªæµç¨‹

## ğŸ”§ å¼€å‘å’Œéƒ¨ç½²

### å¼€å‘è„šæœ¬
```bash
npm run dev      # å¯åŠ¨å¼€å‘æœåŠ¡å™¨(Turbopack)
npm run build    # ç”Ÿäº§æ„å»º
npm run start    # å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
npm run lint     # ä»£ç æ£€æŸ¥
```

### éƒ¨ç½²é€‰é¡¹
- **Vercel**: æ¨èï¼Œä¸Next.jsæ— ç¼é›†æˆ
- **Cloudflare Pages**: æ”¯æŒè¾¹ç¼˜è®¡ç®—
- **è‡ªéƒ¨ç½²**: æ”¯æŒDockerå®¹å™¨åŒ–éƒ¨ç½²

### ç¯å¢ƒé…ç½®
- **å¼€å‘ç¯å¢ƒ**: ä½¿ç”¨ `localhost:3000`
- **ç”Ÿäº§ç¯å¢ƒ**: ç¡®ä¿æ‰€æœ‰ç¯å¢ƒå˜é‡æ­£ç¡®é…ç½®
- **æ•°æ®åº“**: Supabaseç”Ÿäº§å®ä¾‹
- **ç›‘æ§**: é›†æˆGoogle Analyticså’ŒMicrosoft Clarity

## ğŸ“‹ å¾…å¼€å‘åŠŸèƒ½

### å³å°†å‘å¸ƒ (é«˜ä¼˜å…ˆçº§)
- [ ] **æ”¯ä»˜é›†æˆ**: Stripe/PayPalç§¯åˆ†å……å€¼ç³»ç»Ÿ
- [ ] **ç”¨æˆ·å¥—é¤**: æœˆåº¦/å¹´åº¦è®¢é˜…è®¡åˆ’
- [ ] **APIé™æµ**: é˜²æ­¢æ»¥ç”¨çš„è¯·æ±‚é™åˆ¶
- [ ] **é‚®ä»¶é€šçŸ¥**: è§†é¢‘å®Œæˆåçš„é‚®ä»¶æé†’

### è®¡åˆ’ä¸­åŠŸèƒ½ (ä¸­ä¼˜å…ˆçº§)
- [ ] **è§†é¢‘æ¨¡æ¿**: é¢„è®¾çš„æ’­å®¢é£æ ¼æ¨¡æ¿
- [ ] **æ‰¹é‡ç”Ÿæˆ**: æ”¯æŒä¸€æ¬¡æäº¤å¤šä¸ªé¡¹ç›®
- [ ] **ç¤¾äº¤åˆ†äº«**: ä¸€é”®åˆ†äº«åˆ°ç¤¾äº¤åª’ä½“
- [ ] **æ•°æ®åˆ†æ**: ç”¨æˆ·ä½¿ç”¨æƒ…å†µç»Ÿè®¡dashboard

### é•¿æœŸè§„åˆ’ (ä½ä¼˜å…ˆçº§)
- [ ] **å¤šè¯­è¨€æ”¯æŒ**: å›½é™…åŒ–(i18n)
- [ ] **å›¢é˜Ÿåä½œ**: å¤šç”¨æˆ·åä½œåŠŸèƒ½
- [ ] **APIå¼€æ”¾**: æä¾›ç¬¬ä¸‰æ–¹é›†æˆAPI
- [ ] **ç§»åŠ¨åº”ç”¨**: React Nativeç§»åŠ¨ç«¯

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 MVPç‰ˆæœ¬ (2025-01-20)
- âœ… æ ¸å¿ƒè§†é¢‘ç”ŸæˆåŠŸèƒ½å®Œæˆ
- âœ… ç”¨æˆ·è®¤è¯ç³»ç»Ÿé›†æˆ
- âœ… ç§¯åˆ†è®¡è´¹ç³»ç»Ÿå®ç°
- âœ… n8nå·¥ä½œæµé›†æˆå®Œæˆ
- âœ… å“åº”å¼UIç•Œé¢ä¼˜åŒ–
- âœ… æ•°æ®åº“è®¾è®¡å’ŒRPCå‡½æ•°
- âœ… Webhookå¹‚ç­‰æ€§å¤„ç†
- âœ… æ³•å¾‹é¡µé¢(éšç§æ”¿ç­–/æœåŠ¡æ¡æ¬¾)
- âœ… é”™è¯¯å¤„ç†å’Œç”¨æˆ·ä½“éªŒä¼˜åŒ–

### æŠ€æœ¯å€ºåŠ¡ä¿®å¤
- âœ… ä¿®å¤å¤šæ¬¡webhookå›è°ƒå¯¼è‡´çš„é‡å¤æ‰£è´¹é—®é¢˜
- âœ… å®ç°é¡¹ç›®çŠ¶æ€å¹‚ç­‰æ€§æ£€æŸ¥
- âœ… ä¼˜åŒ–æ•°æ®åº“RPCå‡½æ•°é”™è¯¯å¤„ç†
- âœ… æ”¹è¿›APIå“åº”æ ¼å¼å’Œé”™è¯¯ä¿¡æ¯
- âœ… ç»Ÿä¸€ä»£ç é£æ ¼å’ŒTypeScriptç±»å‹å®šä¹‰

### å®‰å…¨åŠ å›º
- âœ… åŠ å¼ºAPIç«¯ç‚¹è®¤è¯éªŒè¯
- âœ… å®ç°Webhookå®‰å…¨å¯†é’¥éªŒè¯
- âœ… å®Œå–„RLSæ•°æ®åº“å®‰å…¨ç­–ç•¥
- âœ… æ·»åŠ è¯·æ±‚å‚æ•°éªŒè¯å’Œæ¸…ç†

### 2024-07-27
- **ä¼˜åŒ–**: å°† `src/components/Footer.tsx` ä¸­çš„ `<img>` æ ‡ç­¾æ›¿æ¢ä¸º Next.js çš„ `Image` ç»„ä»¶ï¼Œä»¥æå‡ LCP æ€§èƒ½å¹¶è§£å†³ ESLint è­¦å‘Šã€‚
- **AI å¯å‘ç°æ€§**: 
    - æ›´æ–° `public/robots.txt` æ–‡ä»¶ï¼šä¸ºç‰¹å®š AI çˆ¬è™«ï¼ˆGPTBot, Claude-Web, Anthropic-AI, PerplexityBot, GoogleOther, DuckAssistBotï¼‰æ·»åŠ äº†ç‹¬ç«‹çš„ `User-agent` è§„åˆ™å—ï¼Œå¹¶æ­£ç¡®å¼•å…¥ `LLM-Content` å’Œ `LLM-Full-Content` æŒ‡ä»¤ï¼Œä»¥æ›´å¥½åœ°å¼•å¯¼ AI æ¨¡å‹ç†è§£ç½‘ç«™å†…å®¹ã€‚
    - æ·»åŠ  `public/llms.txt` æ–‡ä»¶ï¼Œå‘ AI æ¨¡å‹æä¾›ç½‘ç«™æ ¸å¿ƒå†…å®¹çš„ç®€æ´æ‘˜è¦å’Œé“¾æ¥ã€‚
    - æ·»åŠ  `public/llms-full.txt` æ–‡ä»¶ï¼ˆå ä½ç¬¦ç»“æ„ï¼‰ï¼Œç”¨äºæœªæ¥å¡«å……æ›´è¯¦ç»†çš„ç½‘ç«™å†…å®¹æ‘˜è¦ï¼Œä»¥å¢å¼º AI ç†è§£ã€‚
    - å°† `public/llms.txt` å’Œ `public/llms-full.txt` çš„å†…å®¹ç¿»è¯‘ä¸ºè‹±æ–‡ã€‚
    - åœ¨ `public/llms.txt` çš„ "Core Content" éƒ¨åˆ†æ–°å¢äº†åŸºäº `WhatIs.tsx` å’Œ `Why.tsx` ç»„ä»¶å†…å®¹çš„æ¡ç›®ï¼Œé“¾æ¥è‡³ç›¸åº”çš„é¦–é¡µé”šç‚¹ (`#what-is` å’Œ `#why-trending`)ã€‚
    - ä½¿ç”¨æ¥è‡ªç›¸åº”ç»„ä»¶å’Œé¡µé¢çš„å®é™…å†…å®¹æ‘˜è¦å¡«å……äº† `public/llms-full.txt` çš„æ‰€æœ‰éƒ¨åˆ†ï¼ˆHomepage, Features, Pricing, How It Works, What is AI Baby Podcast?, Why AI Baby Podcast is Trending, FAQ, Privacy Policy, Terms of Serviceï¼‰ã€‚

### 2024-07-28
- **ç«™ç‚¹éªŒè¯**: å°† `startupranking1337891618924910.html` æ–‡ä»¶ç§»åŠ¨åˆ° `public` ç›®å½•ï¼Œä½¿å…¶å¯ä»¥é€šè¿‡ `https://www.babypodcast.pro/startupranking1337891618924910.html` è®¿é—®ï¼Œç”¨äºç«™ç‚¹æ‰€æœ‰æƒéªŒè¯ã€‚
- **æ·»åŠ  Google AdSense è„šæœ¬åˆ°ä¸»å¸ƒå±€æ–‡ä»¶ï¼Œç”¨äºå±•ç¤ºå¹¿å‘Šã€‚**
- **åˆ›å»º `public/ads.txt` æ–‡ä»¶ä»¥ç¬¦åˆ Google AdSense çš„è¦æ±‚ï¼Œç­‰å¾…ç”¨æˆ·æä¾›å‘å¸ƒå•†IDè¿›è¡Œæ›´æ–°ã€‚**

### 2024-07-29
- **å…ƒæ•°æ®ä¼˜åŒ–**: å…¨å±€æ›¿æ¢é¡¹ç›®ä¸­çš„ "AI Baby Podcast" å’Œ "AI Baby Podcast Generator" ä¸º "AI Baby Generator"ï¼Œå¹¶æ›´æ–°ç›¸å…³æè¿°ã€‚

### 2024-07-29 (UIæ›´æ–°)
- **ç»„ä»¶æ›´æ–°**:
    - `src/components/Header.tsx`: å°†Logoæ–‡æœ¬ä» "AI Baby Podcast" æ›´æ–°ä¸º "AI Baby Generator"ã€‚
    - `src/components/Hero.tsx`: ä¸ºæ ‡é¢˜ "AI Baby Generator" æ·»åŠ  `whitespace-nowrap` Tailwind CSS ç±»ï¼Œé˜²æ­¢å…¶åœ¨æ˜¾ç¤ºæ—¶æ¢è¡Œã€‚
    - `src/components/Footer.tsx`: å°†ç‰ˆæƒä¿¡æ¯ä¸­çš„ "AI Baby Podcast" æ›´æ–°ä¸º "AI Baby Generator"ã€‚

### 2024-07-30 (åšå®¢åŠŸèƒ½)
- **æ–°åŠŸèƒ½**: æ·»åŠ åšå®¢ç³»ç»Ÿã€‚
    - åˆ›å»ºåšå®¢æ•°æ®æ–‡ä»¶ `src/lib/blog-data.ts`ï¼ŒåŒ…å«åšæ–‡æ¥å£ã€ç¤ºä¾‹æ•°æ®å’Œè¾…åŠ©å‡½æ•°ã€‚
    - åˆ›å»ºåšå®¢åˆ—è¡¨é¡µé¢ `src/app/blog/page.tsx`ï¼Œå±•ç¤ºåšæ–‡æ ‡é¢˜ã€ä½œè€…ã€æ—¥æœŸå’Œæ‘˜è¦ã€‚
    - åˆ›å»ºå•ç¯‡åšæ–‡é¡µé¢ `src/app/blog/[slug]/page.tsx`ï¼Œå±•ç¤ºåšæ–‡å®Œæ•´å†…å®¹ï¼Œå¹¶åŠ¨æ€ç”Ÿæˆå…ƒæ•°æ®ã€‚
    - åˆ›å»ºåšå®¢å¸ƒå±€æ–‡ä»¶ `src/app/blog/layout.tsx`ï¼ŒåŒ…å«é€šç”¨Headerã€Footerå’Œå…ƒæ•°æ®ã€‚
    - åœ¨ `src/components/Header.tsx` ä¸­æ·»åŠ æŒ‡å‘åšå®¢é¡µé¢çš„å¯¼èˆªé“¾æ¥ã€‚
    - åšæ–‡å†…å®¹æ ·å¼é€šè¿‡ç›´æ¥åœ¨JSXä¸­ä½¿ç”¨Tailwind CSSç±»å®ç°ï¼Œæœªå¼•å…¥é¢å¤–ä¾èµ–ã€‚

## ğŸ¤ æŠ€æœ¯æ”¯æŒ

### è”ç³»æ–¹å¼
- **æŠ€æœ¯æ”¯æŒ**: m15905196940@163.com
- **é¡¹ç›®æ–‡æ¡£**: æŸ¥çœ‹é¡¹ç›®å†… `æ•°æ®åº“.md` å’Œç›¸å…³æŠ€æœ¯æ–‡æ¡£
- **é—®é¢˜åé¦ˆ**: é€šè¿‡GitHub Issuesæˆ–é‚®ä»¶è”ç³»

### å¼€å‘å›¢é˜Ÿ
- **æ¶æ„è®¾è®¡**: Next.js + Supabase + n8n
- **å‰ç«¯å¼€å‘**: React 19 + TypeScript + Tailwind CSS
- **åç«¯å¼€å‘**: Next.js API Routes + PostgreSQL
- **DevOps**: Verceléƒ¨ç½² + è‡ªåŠ¨åŒ–CI/CD

### 2024-07-29 (UIæ›´æ–°)
- **ç»„ä»¶æ›´æ–°**:
    - `Header.tsx`: Logoæ–‡æœ¬æ›´æ–°ä¸º "AI Baby Generator"ã€‚
    - `Hero.tsx`: æ ‡é¢˜ "AI Baby Generator" åº”ç”¨ `whitespace-nowrap` é˜²æ­¢æ¢è¡Œã€‚
    - `Footer.tsx`: ç‰ˆæƒæ–‡æœ¬æ›´æ–°ä¸º "AI Baby Generator"ã€‚

### 2024-07-30 (åšå®¢åŠŸèƒ½)
- **æ–°åŠŸèƒ½**: æ·»åŠ åšå®¢é¡µé¢ (`/blog`) åŠæ–‡ç« è¯¦æƒ…é¡µ (`/blog/[slug]`)ã€‚
    - æ–‡ç« å†…å®¹ç¡¬ç¼–ç åœ¨ `src/lib/blog-data.ts`ã€‚
    - åˆ—è¡¨é¡µå±•ç¤ºæ ‡é¢˜ã€ä½œè€…ã€æ—¥æœŸã€æ‘˜è¦ã€‚
    - è¯¦æƒ…é¡µå±•ç¤ºå®Œæ•´å†…å®¹ï¼Œå¹¶ä½¿ç”¨Tailwind CSSè¿›è¡Œæ ·å¼åŒ–ã€‚
    - æ›´æ–°Headerå¯¼èˆªä»¥åŒ…å«åšå®¢é“¾æ¥ã€‚

## ğŸ“„ æ³•å¾‹ä¿¡æ¯

- **éšç§æ”¿ç­–**: [/privacy-policy](/privacy-policy)
- **æœåŠ¡æ¡æ¬¾**: [/terms-of-service](/terms-of-service)
- **æœ€åæ›´æ–°**: May 20, 2025

---

*AI Baby Generator - è®©æ¯ä¸ªäººéƒ½èƒ½è½»æ¾åˆ›å»ºå±äºè‡ªå·±çš„AIæ’­å®¢è§†é¢‘å†…å®¹* ğŸ¬âœ¨ 

### 10. SEO å’Œç¤¾äº¤åª’ä½“ä¼˜åŒ–
- **Canonical URLs**: ä¸ºæ‰€æœ‰å…¬å¼€é¡µé¢ (`/`, `/pricing`, `/privacy-policy`, `/terms-of-service`) æ·»åŠ äº† `<link rel="canonical">` æ ‡ç­¾ï¼Œé€šè¿‡ Next.js `metadata` API å®ç°ã€‚
- **`noindex` for Non-SEO Pages**: ä¸ºéSEOé¡µé¢ (`/login`, `/dashboard/*`, `/payment/success`) æ·»åŠ äº† `noindex` meta æ ‡ç­¾ï¼Œé˜²æ­¢æœç´¢å¼•æ“ç´¢å¼•ã€‚
  - `/login`: é€šè¿‡ `src/app/login/layout.tsx` å®ç°ã€‚
  - `/dashboard/*`: é€šè¿‡ `src/app/dashboard/layout.tsx` å®ç°ã€‚
  - `/payment/success`: ç›´æ¥åœ¨ `src/app/payment/success/page.tsx` å®ç°ã€‚
- **Social Media Meta Tags**:
  - åœ¨æ ¹å¸ƒå±€ `src/app/layout.tsx` ä¸­æ·»åŠ äº†ç«™ç‚¹èŒƒå›´çš„é»˜è®¤ Open Graph (og:*) å’Œ Twitter Card (twitter:*) æ ‡ç­¾ã€‚åŒ…æ‹¬ `og:title`, `og:description`, `og:image`, `og:url`, `og:site_name`, `og:type`, `twitter:card`, `twitter:title`, `twitter:description`, `twitter:image`ã€‚
  - ä½¿ç”¨ `metadataBase` æŒ‡å®šäº†ç”Ÿäº§ç¯å¢ƒåŸŸåã€‚
  - é»˜è®¤åˆ†äº«å›¾ç‰‡è®¾ç½®ä¸º `/social-share.png` (éœ€æ”¾ç½®åœ¨ `public` æ–‡ä»¶å¤¹)ã€‚
  - ä¸ºå…¬å¼€é¡µé¢ (é¦–é¡µ, å®šä»·é¡µ, éšç§æ”¿ç­–, æœåŠ¡æ¡æ¬¾) åœ¨å„è‡ªçš„ `page.tsx` æˆ– `layout.tsx` æ–‡ä»¶ä¸­å®šåˆ¶äº†æ›´å…·ä½“çš„ç¤¾äº¤åª’ä½“å…ƒæ•°æ® (æ ‡é¢˜ã€æè¿°ã€å¯é€‰çš„ç‰¹å®šåˆ†äº«å›¾)ã€‚
  - å»ºè®®åœ¨éƒ¨ç½²åä½¿ç”¨ Facebook Sharing Debugger, Twitter Card Validator, LinkedIn Post Inspector ç­‰å·¥å…·è¿›è¡ŒéªŒè¯ã€‚

## ğŸ“ˆ è¿‘æœŸé‡è¦æ›´æ–°ä¸ä¿®å¤

*   **2024-07-26**:
    *   **SEOä¼˜åŒ–**:
        *   ä¸ºå…¬å¼€é¡µé¢æ·»åŠ  Canonical URL æ ‡ç­¾ã€‚
        *   ä¸ºéSEOé¡µé¢ (å¦‚ç™»å½•ã€ä»ªè¡¨ç›˜) æ·»åŠ  `noindex` æ ‡ç­¾ã€‚
        *   å®ç°å…¨ç«™é»˜è®¤åŠé¡µé¢ç‰¹å®šçš„ç¤¾äº¤åª’ä½“ Meta æ ‡ç­¾ (Open Graph, Twitter Cards)ï¼Œä¼˜åŒ–ç¤¾äº¤åˆ†äº«æ•ˆæœã€‚
*   **2024-07-25**:
    *   **åŠŸèƒ½**: å‰ç«¯ `ProjectsClient.tsx` åŠ¨æ€è®¡ç®—å¹¶æ˜¾ç¤ºé¡¹ç›®æ¶ˆè€—çš„ç§¯åˆ†ï¼Œè€Œä¸æ˜¯ç›´æ¥ä»æ•°æ®åº“è¯»å– `credits_used`ã€‚
    *   **ä¿®å¤**: è°ƒæ•´äº† `deduct_credits_by_duration` RPCï¼Œç¡®ä¿å…¶æ­£ç¡®å†™å…¥ `projects.credits_used` (è™½ç„¶å‰ç«¯æ˜¾ç¤ºé€»è¾‘å·²æ”¹å˜ï¼Œä½†ä¿ç•™æ•°æ®åº“è®°å½•çš„å‡†ç¡®æ€§)ã€‚
    *   **æ•°æ®åº“**: ä¸º `projects` è¡¨æ·»åŠ äº† `credits_used` å­—æ®µ (å°½ç®¡å‰ç«¯æ˜¾ç¤ºé€»è¾‘è°ƒæ•´ï¼Œä½†æ­¤å­—æ®µä»ç”¨äºè®°å½•å®é™…æ¶ˆè€—)ã€‚
*   **2024-07-24**:
    *   **åŠŸèƒ½**: æ–°å¢è§†é¢‘åˆ†è¾¨ç‡ (540p, 720p) å’Œå®½é«˜æ¯” (1:1, 16:9, 9:16) é€‰é¡¹ã€‚720p è§†é¢‘æ¶ˆè€—åŒå€ç§¯åˆ†ã€‚
    *   **UI**: åœ¨ `DashboardClient.tsx` ä¸­æ·»åŠ äº†åˆ†è¾¨ç‡å’Œå®½é«˜æ¯”çš„å•é€‰æŒ‰é’®ç»„ã€‚
    *   **API**: `/submit-podcast-idea` å’Œ `/upload-custom-image` API å‡å·²æ›´æ–°ï¼Œä»¥æ¥æ”¶ã€éªŒè¯å¹¶ä¼ é€’æ–°çš„è§†é¢‘å‚æ•°åˆ° N8N å’Œ `create_initial_project` RPCã€‚
    *   **æ•°æ®åº“**:
        *   `projects` è¡¨æ–°å¢ `video_resolution` (é»˜è®¤ '540p') å’Œ `aspect_ratio` (é»˜è®¤ '9:16') å­—æ®µã€‚
        *   `create_initial_project` RPC æ›´æ–°ä»¥å­˜å‚¨è¿™äº›æ–°å‚æ•°ã€‚
        *   `deduct_credits_by_duration` RPC æ›´æ–°ï¼Œæ ¹æ® `video_resolution` è®¡ç®—ç§¯åˆ†æ¶ˆè€— (720p åŒå€)ã€‚
    *   **N8N**: `/webhook/n8n-video-ready` Webhook ç°åœ¨è°ƒç”¨æ›´æ–°åçš„ `deduct_credits_by_duration` RPCï¼Œè¯¥RPCå¤„ç†åŸºäºåˆ†è¾¨ç‡çš„ç§¯åˆ†è®¡ç®—ã€‚
*   **2024-07-23**:
    *   **åŠŸèƒ½**: å®ç°è‡ªå®šä¹‰å®å®å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½ã€‚
    *   **UI**: `DashboardClient.tsx` ä¸­æ·»åŠ æ¨¡å¼é€‰æ‹©å™¨ ("ç‰¹å¾ç”Ÿæˆ" vs "ä¸Šä¼ å›¾ç‰‡") å’Œå›¾ç‰‡ä¸Šä¼ è¡¨å• (å«é¢„è§ˆã€ç§»é™¤åŠŸèƒ½)ã€‚
    *   **API**:
        *   æ–°å¢ `/api/submit-podcast-idea/upload-custom-image/route.ts` ç”¨äºå¤„ç†å›¾ç‰‡ä¸Šä¼ ã€‚å›¾ç‰‡å­˜å‚¨è‡³ Cloudflare R2ã€‚
        *   åŸ `/api/submit-podcast-idea/route.ts` ç»§ç»­å¤„ç†ç‰¹å¾ç”Ÿæˆã€‚
        *   ä¸¤ä¸ªAPIå‡è°ƒç”¨ä¸åŒçš„N8N Webhook URLã€‚
    *   **æ•°æ®åº“**:
        *   `projects` è¡¨æ–°å¢ `creation_type` ('features' æˆ– 'custom_image') å’Œ `image_url` (å­˜å‚¨è‡ªå®šä¹‰å›¾ç‰‡R2é“¾æ¥)ã€‚
        *   `create_initial_project` RPC æ›´æ–°ä»¥æ¥å—å’Œå­˜å‚¨ `p_creation_type` å’Œ `p_image_url`ã€‚
    *   **ä¿®å¤**: ä¿®æ­£äº†æ–°APIä¸­è°ƒç”¨ `createClient()` æ—¶æœªåŠ  `await` å¯¼è‡´çš„ `TypeError`ã€‚
    *   **é…ç½®**: æ˜ç¡®äº† Cloudflare R2 ç¯å¢ƒå˜é‡ï¼Œç‰¹åˆ«æ˜¯ `R2_PUBLIC_HOSTNAME` åº”ä»…ä¸ºä¸»æœºåã€‚
    *   **ä»£ç é£æ ¼**: æŒ‰é’®æ–‡å­—ç»Ÿä¸€ä¸ºè‹±æ–‡ã€‚

## ğŸ“ æœªæ¥è®¡åˆ’ä¸å¾…åŠ

- **ç”¨æˆ·ä½“éªŒä¼˜åŒ–**:
  - å›¾ç‰‡ä¸Šä¼ ç»„ä»¶çš„è¿›ä¸€æ­¥ç¾åŒ–å’Œäº¤äº’æå‡ã€‚
  - æä¾›æ›´è¯¦ç»†çš„é”™è¯¯æç¤ºå’Œå¼•å¯¼ã€‚
- **åŠŸèƒ½å¢å¼º**:
  - æ”¯æŒæ›´å¤šå®å®ç‰¹å¾è‡ªå®šä¹‰é€‰é¡¹ (å¦‚æœè£…ã€é…é¥°)ã€‚
  - å…è®¸ç”¨æˆ·é€‰æ‹©ä¸åŒçš„èƒŒæ™¯éŸ³ä¹æˆ–ä¸Šä¼ è‡ªå·±çš„èƒŒæ™¯éŸ³ä¹ã€‚
  - é›†æˆæ›´å¤šAIæ¨¡å‹ï¼Œæä¾›ä¸åŒçš„è‰ºæœ¯é£æ ¼é€‰é¡¹ã€‚
- **è¿è¥ä¸ç›‘æ§**:
  - å»ºç«‹æ›´å®Œå–„çš„åå°ç®¡ç†ç³»ç»Ÿï¼Œç›‘æ§é¡¹ç›®çŠ¶æ€å’Œç”¨æˆ·è¡Œä¸ºã€‚
  - é›†æˆæ—¥å¿—ç³»ç»Ÿï¼Œæ–¹ä¾¿é—®é¢˜æ’æŸ¥å’Œåˆ†æã€‚
- **å›½é™…åŒ–**:
  - æ”¯æŒå¤šè¯­è¨€ç•Œé¢ã€‚

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿ç¤¾åŒºè´¡çŒ®ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š
1. Fork æœ¬ä»“åº“
2. åˆ›å»ºæ‚¨çš„ç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ‚¨çš„æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ä¸€ä¸ª Pull Request

## ğŸ“„ å¼€æºè®¸å¯

æœ¬é¡¹ç›®åŸºäº MIT è®¸å¯è¯ã€‚è¯¦æƒ…è¯·å‚é˜… `LICENSE` æ–‡ä»¶ã€‚ 

## æ›´æ–°æ—¥å¿—

### 2024-07-28
- **ç«™ç‚¹éªŒè¯**: å°† `startupranking1337891618924910.html` æ–‡ä»¶ç§»åŠ¨åˆ° `public` ç›®å½•ï¼Œä½¿å…¶å¯ä»¥é€šè¿‡ `https://www.babypodcast.pro/startupranking1337891618924910.html` è®¿é—®ï¼Œç”¨äºç«™ç‚¹æ‰€æœ‰æƒéªŒè¯ã€‚
- **æ·»åŠ  Google AdSense è„šæœ¬åˆ°ä¸»å¸ƒå±€æ–‡ä»¶ï¼Œç”¨äºå±•ç¤ºå¹¿å‘Šã€‚**
- **åˆ›å»º `public/ads.txt` æ–‡ä»¶ä»¥ç¬¦åˆ Google AdSense çš„è¦æ±‚ï¼Œç­‰å¾…ç”¨æˆ·æä¾›å‘å¸ƒå•†IDè¿›è¡Œæ›´æ–°ã€‚**

### 2024-07-27
- **ä¼˜åŒ–**: å°† `src/components/Footer.tsx` ä¸­çš„ `<img>` æ ‡ç­¾æ›¿æ¢ä¸º Next.js çš„ `Image` ç»„ä»¶ï¼Œä»¥æå‡ LCP æ€§èƒ½å¹¶è§£å†³ ESLint è­¦å‘Šã€‚
- **AI å¯å‘ç°æ€§**: 
    - æ›´æ–° `public/robots.txt` æ–‡ä»¶ï¼šä¸ºç‰¹å®š AI çˆ¬è™«ï¼ˆGPTBot, Claude-Web, Anthropic-AI, PerplexityBot, GoogleOther, DuckAssistBotï¼‰æ·»åŠ äº†ç‹¬ç«‹çš„ `User-agent` è§„åˆ™å—ï¼Œå¹¶æ­£ç¡®å¼•å…¥ `LLM-Content` å’Œ `LLM-Full-Content` æŒ‡ä»¤ï¼Œä»¥æ›´å¥½åœ°å¼•å¯¼ AI æ¨¡å‹ç†è§£ç½‘ç«™å†…å®¹ã€‚
    - æ·»åŠ  `public/llms.txt` æ–‡ä»¶ï¼Œå‘ AI æ¨¡å‹æä¾›ç½‘ç«™æ ¸å¿ƒå†…å®¹çš„ç®€æ´æ‘˜è¦å’Œé“¾æ¥ã€‚
    - æ·»åŠ  `public/llms-full.txt` æ–‡ä»¶ï¼ˆå ä½ç¬¦ç»“æ„ï¼‰ï¼Œç”¨äºæœªæ¥å¡«å……æ›´è¯¦ç»†çš„ç½‘ç«™å†…å®¹æ‘˜è¦ï¼Œä»¥å¢å¼º AI ç†è§£ã€‚
    - å°† `public/llms.txt` å’Œ `public/llms-full.txt` çš„å†…å®¹ç¿»è¯‘ä¸ºè‹±æ–‡ã€‚
    - åœ¨ `public/llms.txt` çš„ "Core Content" éƒ¨åˆ†æ–°å¢äº†åŸºäº `WhatIs.tsx` å’Œ `Why.tsx` ç»„ä»¶å†…å®¹çš„æ¡ç›®ï¼Œé“¾æ¥è‡³ç›¸åº”çš„é¦–é¡µé”šç‚¹ (`#what-is` å’Œ `#why-trending`)ã€‚
    - ä½¿ç”¨æ¥è‡ªç›¸åº”ç»„ä»¶å’Œé¡µé¢çš„å®é™…å†…å®¹æ‘˜è¦å¡«å……äº† `public/llms-full.txt` çš„æ‰€æœ‰éƒ¨åˆ†ï¼ˆHomepage, Features, Pricing, How It Works, What is AI Baby Podcast?, Why AI Baby Podcast is Trending, FAQ, Privacy Policy, Terms of Serviceï¼‰ã€‚

### 2024-07-29
- **å…ƒæ•°æ®ä¼˜åŒ–**: å…¨å±€æ›¿æ¢é¡¹ç›®ä¸­çš„ "AI Baby Podcast" å’Œ "AI Baby Podcast Generator" ä¸º "AI Baby Generator"ï¼Œå¹¶æ›´æ–°ç›¸å…³æè¿°ã€‚

### 2024-07-29 (UIæ›´æ–°)
- **ç»„ä»¶æ›´æ–°**:
    - `Header.tsx`: Logoæ–‡æœ¬æ›´æ–°ä¸º "AI Baby Generator"ã€‚
    - `Hero.tsx`: æ ‡é¢˜ "AI Baby Generator" åº”ç”¨ `whitespace-nowrap` é˜²æ­¢æ¢è¡Œã€‚
    - `Footer.tsx`: ç‰ˆæƒæ–‡æœ¬æ›´æ–°ä¸º "AI Baby Generator"ã€‚

### 2024-07-30 (åšå®¢åŠŸèƒ½)
- **æ–°åŠŸèƒ½**: æ·»åŠ åšå®¢é¡µé¢ (`/blog`) åŠæ–‡ç« è¯¦æƒ…é¡µ (`/blog/[slug]`)ã€‚
    - æ–‡ç« å†…å®¹ç¡¬ç¼–ç åœ¨ `src/lib/blog-data.ts`ã€‚
    - åˆ—è¡¨é¡µå±•ç¤ºæ ‡é¢˜ã€ä½œè€…ã€æ—¥æœŸã€æ‘˜è¦ã€‚
    - è¯¦æƒ…é¡µå±•ç¤ºå®Œæ•´å†…å®¹ï¼Œå¹¶ä½¿ç”¨Tailwind CSSè¿›è¡Œæ ·å¼åŒ–ã€‚
    - æ›´æ–°Headerå¯¼èˆªä»¥åŒ…å«åšå®¢é“¾æ¥ã€‚

## ğŸ” å®‰å…¨åŠ å›ºä¸æ¼æ´ä¿®å¤

### Clickjacking é˜²æŠ¤ (é‡è¦ - å¾…å®¡æŸ¥)
- **æ—¥æœŸ**: 2024-07-28
- **æè¿°**: ä¸ºäº†é˜²æ­¢ Clickjacking (UI Redress Attack) æ”»å‡»ï¼Œå·²åœ¨ `next.config.mjs` ä¸­ä¸ºæ‰€æœ‰è·¯å¾„é…ç½®äº†ä»¥ä¸‹ HTTP å®‰å…¨å¤´éƒ¨ï¼š
  - `X-Frame-Options: DENY`
  - `Content-Security-Policy: frame-ancestors 'none';`
- **å½±å“**: æ­¤é…ç½®å°†ç¦æ­¢ä»»ä½•åŸŸå (åŒ…æ‹¬æœ¬ç«™è‡ªèº«) å°†ç½‘ç«™é¡µé¢åµŒå…¥åˆ° `<frame>`, `<iframe>`, `<embed>`, æˆ– `<object>` ä¸­ã€‚
- **å®¡æŸ¥å»ºè®®**: è¯·ç¡®è®¤æ­¤å…¨å±€è®¾ç½®ä¸ä¼šå½±å“ä»»ä½•é¢„æœŸçš„åµŒå…¥è¡Œä¸ºã€‚å¦‚æœæœªæ¥æœ‰åˆæ³•çš„è·¨åŸŸåµŒå…¥éœ€æ±‚ï¼Œéœ€è¦è°ƒæ•´ `Content-Security-Policy` çš„ `frame-ancestors` æŒ‡ä»¤ (ä¾‹å¦‚ `frame-ancestors 'self' https://trusted-domain.com;`)ã€‚

### Webhookå®‰å…¨
- âœ… n8nå›è°ƒä½¿ç”¨å…±äº«å¯†é’¥éªŒè¯

### APIå®‰å…¨
- âœ… æ‰€æœ‰APIç«¯ç‚¹éƒ½æœ‰è®¤è¯æ£€æŸ¥

### æ•°æ®åº“å®‰å…¨
- âœ… å®Œå–„RLSæ•°æ®åº“å®‰å…¨ç­–ç•¥
- âœ… æ·»åŠ è¯·æ±‚å‚æ•°éªŒè¯å’Œæ¸…ç†

### 2024-07-28
- **ç«™ç‚¹éªŒè¯**: å°† `startupranking1337891618924910.html` æ–‡ä»¶ç§»åŠ¨åˆ° `public` ç›®å½•ï¼Œä½¿å…¶å¯ä»¥é€šè¿‡ `https://www.babypodcast.pro/startupranking1337891618924910.html` è®¿é—®ï¼Œç”¨äºç«™ç‚¹æ‰€æœ‰æƒéªŒè¯ã€‚ 

## ğŸ é”™è¯¯ä¿®å¤è®°å½•

### 2024-05-29: ä¿®å¤ Supabase RPC `create_initial_project` å‚æ•°ä¸åŒ¹é…é—®é¢˜
- **é—®é¢˜**: è°ƒç”¨ `create_initial_project` æ—¶ï¼Œç”±äºå‚æ•°åˆ—è¡¨ä¸æ•°æ®åº“å‡½æ•°ç­¾åä¸ä¸€è‡´ï¼Œå¯¼è‡´ "Could not find the function" é”™è¯¯ã€‚
- **åŸå› **: å‰ç«¯ä¼ é€’çš„å‚æ•°ï¼ˆå¦‚ `p_appearance_mode`, `p_content_mode`, `p_audio_url`, `p_text_script`) ä¸æ•°æ®åº“å‡½æ•° `create_initial_project(p_aspect_ratio, p_creation_type, p_ethnicity, p_hair, p_image_url, p_job_id, p_topic, p_user_id, p_video_resolution)` çš„æœŸæœ›å‚æ•°ä¸ç¬¦ã€‚
- **ä¿®å¤**:
    - åœ¨ `src/app/api/create-podcast-project/route.ts` ä¸­ï¼Œä¿®æ”¹äº†è°ƒç”¨ `supabase.rpc('create_initial_project', ...)` æ—¶çš„å‚æ•°å¯¹è±¡ã€‚
    - ç§»é™¤äº† `p_appearance_mode`, `p_content_mode` (æ—§), `p_audio_url`, `p_text_script`ã€‚
    - æ·»åŠ äº† `p_creation_type` å‚æ•°ï¼Œå…¶å€¼è®¾ç½®ä¸ºåŸ `contentCreationMode` çš„å€¼ã€‚
- **çŠ¶æ€**: å·²è§£å†³ã€‚å»ºè®®æµ‹è¯•åˆ›å»ºæ’­å®¢é¡¹ç›®æµç¨‹ã€‚ 

### 2024-07-26

- **Feature**: Added a 15-second duration limit for custom audio script uploads in the podcast creation form.
  - Modified `src/components/DashboardClient.tsx` to include client-side validation for audio duration.
  - If an uploaded audio file exceeds 15 seconds, an error message is displayed, and the file is not accepted. 